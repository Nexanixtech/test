<!DOCTYPE html>

<html lang="en">
<head><link as_="style" href="styles.css" rel="preload"/>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Technovation Products</title>
<link href="/public/tecpn.png" rel="shortcut icon" type="image/x-icon"/>
<link href="styles.css" rel="stylesheet"/>
<!-- Google Fonts -->

<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>




<script defer="defer" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.0.1/model-viewer.min.js" type="module"></script>
<script defer="defer" src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
<script defer="defer" src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/STLLoader.js"></script>
<script defer="defer" src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/exporters/GLTFExporter.js"></script>
<style>
        /* New Product Layout Styles */
        .product-container {
            width: 100%;

            margin: 0 auto;
            padding: 20px;
        }

        .product-top-grid {
            display: grid;
            grid-template-columns: 50% 50%;
            gap: 0;
            margin-bottom: 30px;
            height: 500px;
            width: 100%;
        }

        .model-viewer-container {
            height: 100%;
            width: 100%;
            grid-template-columns: 50% 50%;

            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .product-main-image {
            position: relative;
            height: 100%;
            width: 100%;

            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .product-main-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;

        }

        .product-info-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.7));
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 50px 30px;
            box-sizing: border-box;
            color: white;
            text-align: center;
        }

        .product-info-overlay h1 {
            font-size: 42px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .product-info-overlay p {
            font-size: 24px;
            opacity: 0.9;
            margin-bottom: 30px;
        }


        .product-description-grid
        {
            display: grid;
            grid-template-columns: 50% 50%;
            gap: 20px;
            margin-bottom: 30px;
            min-height: 300px;
        }
        .product-specification-grid{
            display: grid;
            grid-template-columns: 50% 50%;
            gap: 20px; width: 100%;
            max-width: 100%;
            margin-bottom: 30px;
            min-height: 300px;
        }

        
        .product-description-text{
            padding: 40px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);

        }

        .product-specification-table {
            padding: 30px;
            background-color: #fff;
            width: 100%;
        }
        
        .product-specification-table h2 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 30px;
            color: #000;
        }
        #specificationsTable {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 15px;
        }
        
        #specificationsTable tr {
            display: grid;
            grid-template-columns: 150px 1fr;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .product-description-image,
        .product-specification-image {

            width: 100%;
    background-color: #444;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    padding: 0;
    margin: 0;
        }

        .product-description-image img,
        .product-specification-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .product-video-container {
            width: 100%;
            margin-bottom: 30px;
            padding: 30px;

            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
        }

        #productVideo {
            width: 100%;
            max-width: 800px;

            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .detailed-specifications {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            padding: 20px 0;
            width: 100%;
        }

        .spec-item {
            display: flex;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .spec-image {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
        }

        .spec-image img {
            width: 40px;
            height: 40px;
            object-fit: contain;
            color: #6366f1;
        }

        .spec-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .spec-name {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .spec-value {
            font-size: 16px;
            color: #6b7280;
        }


        .enquiry-button-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }

        .enquiry-button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 30px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .enquiry-button:hover {
            background-color: #2980b9;
        }

        /* Make the layout responsive */
        @media (max-width: 768px) {

            .product-top-grid,
            .product-description-grid,
            .product-specification-grid {
                grid-template-columns: 1fr;
            }

            .product-top-grid {
                grid-template-columns: 1fr;
                height: auto;
            }

            .model-viewer-container,
            .product-main-image {
                height: 400px;
            }
        }
    </style>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&amp;family=Poppins:wght@400;500;600;700&amp;family=Roboto:wght@400;500&amp;family=Oswald:wght@700&amp;display=swap" rel="stylesheet"/>  <link rel="stylesheet" href="animation.css">
</head>
<body>
<!-- Add loader at the top of body -->
<div class="loader-container" id="loader">
<div class="loader"></div>
</div>
<!-- First Navigation Bar -->
<nav class="navbar">
<div class="container">
<div class="logo">
<a href="index.html">
<img src="/public/Tech Logo (B).png" alt="Tech Logo" class="spin-logo" />
<img alt="Technovation Logo" loading="lazy" src="/public/techno black logo-Photoroom.png"/>
</a>
</div>
<div class="nav-links">
<ul>
<li><a class="active" href="index.html">Home</a></li>
<li><a href="./index.html#prod-section">Product</a></li>
</ul>
</div>
<div class="menu-toggle">
<span class="bar"></span>
<span class="bar"></span>
<span class="bar"></span>
</div>
</div>
</nav>
<div class="nav-container">
<div class="main-navbar">
<!-- Categories Button (visible in mobile/tab view) -->
<div class="categories-menu-button">
<span>Categories</span>
</div>
<!-- Categories Navigation for Desktop -->
<div class="desktop-category-navbar">
<ul class="category-list" id="desktopCategories">
<!-- Categories will be loaded here dynamically -->
</ul>
</div>
<!-- Search Form for Desktop -->
<div class="search-container">
<form action="/search" class="search-form" method="GET">
<input class="search-input" id="navSearch" maxlength="256" name="query" placeholder="Search…" required="" type="search"/>
<button class="search-button" type="submit">
<svg fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path>
</svg>
</button>
<div class="search-results" id="searchResults"></div>
</form>
</div>
<!-- Search Icon (visible in mobile/tab view) -->
<div class="search-icon-mobile">
<svg fill="currentColor" height="20" viewbox="0 0 16 16" width="20" xmlns="http://www.w3.org/2000/svg">
<path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path>
</svg>
</div>
</div>
<!-- Mobile Categories Menu (hidden by default) -->
<div class="mobile-category-menu">
<ul class="mobile-category-list" id="mobileCategories">
<!-- Categories will be loaded here dynamically -->
</ul>
</div>
<!-- Mobile Search Form (hidden by default) -->
<div class="mobile-search-container">
<form action="/search" class="mobile-search-form" method="GET">
<input class="mobile-search-input" id="mobileNavSearch" maxlength="256" name="query" placeholder="Search…" required="" type="search"/>
<button class="mobile-search-button" type="submit">
<svg fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path>
</svg>
</button>
<div class="close-search-button">
<svg fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path>
</svg>
</div>
<div class="search-results" id="mobileSearchResults"></div>
</form>
</div>
</div>
<!-- Overlay Background -->
<div class="overlay" id="overlay"></div>
<!-- Banner Section HTML -->
<section class="banner-section">
<div class="banner-overlay">
<h1 class="banner-title" id="productTitle">Loading...</h1>
<div class="breadcrumb">
<a href="./index.html">Home</a>
<span class="breadcrumb-separator">›</span>
<a href="./index.html#prod-section">Products</a>
<span class="breadcrumb-separator">›</span>
<span class="current-page" id="productName">Loading...</span>
</div>
</div>
</section>
<!-- product gallery -->
<!-- New Product Layout -->
<div class="product-container">
<!-- Top Section: 3D Model + Main Image -->
<div class="product-top-grid">
<div class="model-viewer-container">
<model-viewer alt="3D model" auto-rotate="" camera-controls="" camera-orbit="0deg 75deg 105%" environment-image="neutral" exposure="1" id="model-viewer" interaction-prompt="auto" interaction-prompt-style="basic" interaction-prompt-threshold="0" max-camera-orbit="auto auto 200%" max-field-of-view="90deg" min-camera-orbit="auto auto 50%" min-field-of-view="30deg" shadow-intensity="1" src="" style="width: 100%; height: 800px;"></model-viewer>
</div>
<div class="product-main-image">
<img alt="Product Image" id="mainProductImage" loading="lazy" src=""/>
<div class="product-info-overlay">
<h1 id="productTitleOverlay"></h1>
<p id="productSubtitleOverlay"></p>
</div>
</div>
</div>
<!-- Description Section -->
<div class="product-description-grid" style="margin: 40px;">
<div class="product-description-text">
<h2>Description</h2>
<div id="productDescription"></div>
</div>
<div class="product-description-image">
<img alt="Description Image" id="descriptionImage" loading="lazy" src=""/>
</div>
</div>
<!-- Specification Section -->
<div class="product-specification-grid">
<div class="product-specification-image">
<img alt="Specification Image" id="specificationImage" loading="lazy" src=""/>
</div>
<div class="product-specification-table">
<h2>Specifications</h2>
<table id="specificationsTable">
<!-- Specifications will be filled dynamically -->
</table>
</div>
</div>
<!-- Video Section -->
<div class="product-video-container" id="productVideoContainer">
<video controls="" id="productVideo">
<source src="" type="video/mp4"/>
                Your browser does not support the video tag.
            </video>
</div>
<!-- Detailed Specifications With Images -->
<div class="detailed-specifications" id="detailedSpecifications">
<!-- Specifications with images will be filled dynamically -->
</div>
<!-- Enquiry Button -->
<div class="enquiry-button-container">
<button class="enquiry-button" id="enquiryButton">Enquiry Now</button>
</div>
</div>
<!-- Related Products -->
<section class="related-products" id="relatedProductsSection" style="display: none;">
<h2>Related Products</h2>
<div class="related-products-grid" id="relatedProducts">
<!-- Related products will be loaded here dynamically -->
</div>
</section>
<!-- footer   -->
<footer class="tech-footer">
<div class="footer-container">
<div class="footer-left">
<div class="footer-logo">
<img alt="Technovation" loading="lazy" src="/public/techno black logo-Photoroom.png"/>
</div>
<p class="footer-description">
                    With over a decade of experience, we are proud to deliver innovative products to clients around the
                    globe.
                </p>
<div class="footer-contact-info">
<p class="contact-item">
<i class="fa-solid fa-map-marker-alt contact-icon"></i>
                        186/25 golden nager kallidaikurichi, Tirunelveli -627416
                    </p>
<p class="contact-item">
<i class="fa-solid fa-envelope contact-icon"></i>
                        techtechnovation@gmail.com
                    </p>
<p class="contact-item">
<i class="fa-solid fa-phone contact-icon"></i>
                        7339224811
                    </p>
</div>
</div>
<div class="footer-right">
<h2 class="footer-section-title">Sections</h2>
<div class="footer-divider"></div>
<ul class="footer-links">
<li>
<i class="fa-solid fa-chevron-right arrow-icon"></i>
<a href="./index.html">Home</a>
</li>
<li>
<i class="fa-solid fa-chevron-right arrow-icon"></i>
<a href="./index.html#prod-section">Products</a>
</li>
</ul>
</div>
</div>
</footer>
<!-- Font Awesome for Icons -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
<div class="footer-navbar">
<div class="copyright">© Copyright - <a class="company-link" href="https://technovationpvtltd.com/">Technovation</a></div>
</div>
<script src="script.js"></script>
<script type="module">
        import { supabase } from './supabase.js'

        // Search functionality
        const searchInput = document.getElementById('navSearch')
        const searchResults = document.getElementById('searchResults')
        let searchTimeout

        // Handle search input event
        searchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout)
            const query = e.target.value.trim()

            if (query.length < 2) {
                searchResults.style.display = 'none'
                return
            }

            searchTimeout = setTimeout(async () => {
                try {
                    const { data: products, error } = await supabase
                        .from('products')
                        .select('*')
                        .ilike('title', `%${query}%`)
                        .limit(5)

                    if (error) throw error

                    if (products.length > 0) {
                        searchResults.innerHTML = products
                            .map(
                                (product) => `
                                <a href="./product.html?id=${product.id}" class="search-result-item">
                                    <img src="${product.main_image}" alt="${product.title}">
                                    <div class="search-result-info">
                                        <h4>${product.title}</h4>
                                        <p>${product.subtitle}</p>
                                    </div>
                                </a>
                            `
                            )
                            .join('')
                        searchResults.style.display = 'block'
                    } else {
                        searchResults.innerHTML = '<div class="no-results">No products found</div>'
                        searchResults.style.display = 'block'
                    }
                } catch (error) {
                    console.error('Error searching products:', error)
                }
            }, 300)
        })

        // Mobile search functionality
        const mobileSearchInput = document.getElementById('mobileNavSearch')
        const mobileSearchResults = document.getElementById('mobileSearchResults')
        let mobileSearchTimeout

        // Handle mobile search input event
        mobileSearchInput.addEventListener('input', (e) => {
            clearTimeout(mobileSearchTimeout)
            const query = e.target.value.trim()

            if (query.length < 2) {
                mobileSearchResults.style.display = 'none'
                return
            }

            mobileSearchTimeout = setTimeout(async () => {
                try {
                    const { data: products, error } = await supabase
                        .from('products')
                        .select('*')
                        .ilike('title', `%${query}%`)
                        .limit(5)

                    if (error) throw error

                    if (products.length > 0) {
                        mobileSearchResults.innerHTML = products
                            .map(
                                (product) => `
                                <a href="./product.html?id=${product.id}" class="search-result-item">
                                    <img src="${product.main_image}" alt="${product.title}">
                                    <div class="search-result-info">
                                        <h4>${product.title}</h4>
                                        <p>${product.subtitle}</p>
                                    </div>
                                </a>
                            `
                            )
                            .join('')
                        mobileSearchResults.style.display = 'block'
                    } else {
                        mobileSearchResults.innerHTML = '<div class="no-results">No products found</div>'
                        mobileSearchResults.style.display = 'block'
                    }
                } catch (error) {
                    console.error('Error searching products:', error)
                }
            }, 300)
        })

        // Close search results when clicking outside (for desktop & mobile)
        document.addEventListener('click', (e) => {
            if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
                searchResults.style.display = 'none'
            }
            if (!mobileSearchInput.contains(e.target) && !mobileSearchResults.contains(e.target)) {
                mobileSearchResults.style.display = 'none'
            }
        })

        document.addEventListener('touchstart', (e) => {
            if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
                searchResults.style.display = 'none'
            }
            if (!mobileSearchInput.contains(e.target) && !mobileSearchResults.contains(e.target)) {
                mobileSearchResults.style.display = 'none'
            }
        })

        // Handle search submission
        document.querySelector('.search-form').addEventListener('submit', (e) => {
            e.preventDefault()
            const query = searchInput.value.trim()
            if (query) {
                window.location.href = `#`
            }
        })

        // Handle mobile search form submission
        document.querySelector('.mobile-search-form').addEventListener('submit', (e) => {
            e.preventDefault()
            const query = mobileSearchInput.value.trim()
            if (query) {
                window.location.href = `#`
            }
        })

        // Mobile search functionality toggle
        const searchIconMobile = document.querySelector('.search-icon-mobile')
        const mobileSearchContainer = document.querySelector('.mobile-search-container')
        const closeSearchButton = document.querySelector('.close-search-button')

        // Show mobile search
        searchIconMobile.addEventListener('click', () => {
            mobileSearchContainer.classList.add('active')
            document.querySelector('.overlay').classList.add('active')
        })

        // Close mobile search
        closeSearchButton.addEventListener('click', () => {
            mobileSearchContainer.classList.remove('active')
            document.querySelector('.overlay').classList.remove('active')
        })

        // Handle category toggle on mobile/tablet
        const categoryMenuButton = document.querySelector('.categories-menu-button')
        const mobileCategoryMenu = document.querySelector('.mobile-category-menu')

        categoryMenuButton.addEventListener('click', () => {
            mobileCategoryMenu.classList.toggle('active')
        })

        // Load categories
        async function loadCategories() {
            try {
                const { data: categories, error } = await supabase
                    .from('categories')
                    .select('*')
                    .order('name')

                if (error) throw error

                // Update desktop categories
                const desktopCategories = document.getElementById('desktopCategories')
                desktopCategories.innerHTML = categories.map(category => `
                    <li class="category-item">
                        <a href="./category.html?name=${encodeURIComponent(category.name)}" class="category-link">${category.name}</a>
                    </li>
                `).join('')

                // Update mobile categories
                const mobileCategories = document.getElementById('mobileCategories')
                mobileCategories.innerHTML = categories.map(category => `
                    <li class="mobile-category-item">
                        <a href="./category.html?name=${encodeURIComponent(category.name)}" class="mobile-category-link">${category.name}</a>
                    </li>
                `).join('')
            } catch (error) {
                console.error('Error loading categories:', error)
            }
        }

        // Load categories when page loads
        loadCategories()




        // Get product ID from URL
        const urlParams = new URLSearchParams(window.location.search)
        const productId = urlParams.get('id')

        if (!productId) {
            window.location.href = 'index.html'
        }


        // Load product details

        // Function to load product details with new layout
        async function loadProductDetails() {
            showLoader();
            try {

                const { data: product, error: productError } = await supabase
                    .from('products')
                    .select('*')
                    .eq('id', productId)
                    .single();

                if (productError) throw productError;
                console.log("Product loaded:", product);
                console.log("Available properties:", Object.keys(product));

                // Update page title and breadcrumb
                document.title = `${product.title} - Technovation`;
                document.getElementById('productTitle').textContent = product.title;
                document.getElementById('productName').textContent = product.title;

                // Update overlay title and subtitle
                document.getElementById('productTitleOverlay').textContent = product.title;
                document.getElementById('productSubtitleOverlay').textContent = product.subtitle || '';

                // Update main image
                document.getElementById('mainProductImage').src = product.main_image;

                // Update description
                document.getElementById('productDescription').innerHTML = product.description || 'No description available';

                // Update description image if available
                if (product.right_desc_image) {
                    document.getElementById('descriptionImage').src = product.right_desc_image;
                } else {
                    document.getElementById('descriptionImage').src = product.main_image; // Fallback to main image
                }

                // Update specification image if available
                if (product.left_spec_image) {
                    document.getElementById('specificationImage').src = product.left_spec_image;
                } else {
                    document.getElementById('specificationImage').src = product.main_image; // Fallback to main image
                }

                // Update specifications table
                const specificationsTable = document.getElementById('specificationsTable');
                if (product.specifications && Object.keys(product.specifications).length > 0) {
                    specificationsTable.innerHTML = Object.entries(product.specifications)
                        .map(([key, value]) => `
                    <tr>
                        <td class="spec-name" style=" width: 150px;
    font-size: 18px;
    font-weight: 600;
    color: #333;
    padding: 8px 0;
    vertical-align: top;
    text-align: left;">${key}</td>
                        <td class="spec-value" style=" flex: 1;
    font-size: 18px;
    color: #6b7280;
    padding: 8px 0;
    vertical-align: top;
    text-align: left;">${value}</td>
                    </tr>
                `).join('');
                } else {
                    specificationsTable.innerHTML = '<tr><td colspan="2">No specifications available</td></tr>';
                }

                // Update detailed specifications with images
                // For technical specifications
                // For technical specifications
                const detailedSpecifications = document.getElementById('detailedSpecifications');
                if (product.technical_specifications && product.technical_specifications.length > 0) {
                    detailedSpecifications.innerHTML = product.technical_specifications.map(spec => `
        <div class="spec-item">
            <div class="spec-image">
                <img src="${spec.image || '/public/spec-default.png'}" alt="${spec.spec}">
            </div>
            <div class="spec-content">
                <div class="spec-name">${spec.spec}</div>
                <div class="spec-value">${spec.subspec}</div>
            </div>
        </div>
    `).join('');
                } else {
                    // Fall back to regular specifications
                    if (product.specifications && Object.keys(product.specifications).length > 0) {
                        detailedSpecifications.innerHTML = Object.entries(product.specifications)
                            .map(([key, value]) => `<div class="spec-item">
            <div class="spec-image">
                <img src="/public/spec-default.png" alt="${key}">
            </div>
            <div class="spec-content">
                <div class="spec-name">${key}</div>
                <div class="spec-value">${value}</div>
            </div>
        </div>`).join('');
                    } else {
                        detailedSpecifications.innerHTML = '<div class="no-specs">No detailed specifications available</div>';
                    }
                }

                // For video background
                if (product.product_video) {
                    const videoContainer = document.getElementById('productVideoContainer');
                    videoContainer.style.display = 'flex';
                    const videoElement = document.getElementById('productVideo');
                    videoElement.src = product.product_video;
                    videoElement.poster = product.main_image;

                    // Set background color for video container
                    if (product.video_bg_settings && product.video_bg_settings.type === 'solid') {
                        videoContainer.style.backgroundColor = product.video_bg_settings.color;
                    }
                } else {
                    document.getElementById('productVideoContainer').style.display = 'none';
                }

                // Load 3D model if available
                if (product.model_3d) {
                    const modelViewer = document.getElementById('model-viewer')
                    let gltfUrl = null

                    // Check if the model is STL format
                    if (product.model_3d.toLowerCase().endsWith('.stl')) {
                        // Load STL file
                        const loader = new THREE.STLLoader()
                        loader.load(product.model_3d, function (geometry) {
                            // Create a mesh
                            const material = new THREE.MeshStandardMaterial({
                                color: 0x808080,
                                metalness: 0.5,
                                roughness: 0.5
                            })
                            const mesh = new THREE.Mesh(geometry, material)

                            // Center the geometry
                            geometry.computeBoundingBox()
                            const center = geometry.boundingBox.getCenter(new THREE.Vector3())
                            geometry.translate(-center.x, -center.y, -center.z)

                            // Create a scene
                            const scene = new THREE.Scene()
                            scene.add(mesh)

                            // Export to GLTF
                            const exporter = new THREE.GLTFExporter()
                            exporter.parse(scene, function (gltf) {
                                // Create a blob URL from the GLTF data
                                const blob = new Blob([JSON.stringify(gltf)], { type: 'model/gltf+json' })
                                gltfUrl = URL.createObjectURL(blob)

                                // Update model-viewer with the GLTF URL
                                modelViewer.src = gltfUrl
                                modelViewer.style.display = 'block'
                            })
                        }, undefined, function (error) {
                            console.error('Error loading STL file:', error)
                            modelViewer.style.display = 'none'
                        })
                    } else {
                        // For non-STL files, load directly
                        gltfUrl = product.model_3d
                        modelViewer.src = gltfUrl
                        modelViewer.style.display = 'block'
                    }
                }

                // Load related products if available
                if (product.related_products && product.related_products.length > 0) {
                    const { data: relatedProducts, error: relatedError } = await supabase
                        .from('products')
                        .select('*')
                        .in('id', product.related_products);

                    if (relatedError) throw relatedError;

                    if (relatedProducts && relatedProducts.length > 0) {
                        document.getElementById('relatedProductsSection').style.display = 'block';
                        const relatedProductsGrid = document.getElementById('relatedProducts');
                        relatedProductsGrid.innerHTML = relatedProducts.map(related => `
                    <div class="related-product-card">
                        <img src="${related.main_image}" alt="${related.title}">
                        <h3>${related.title}</h3>
                        <a href="./product.html?id=${related.id}" class="view-details-btn">VIEW DETAILS</a>
                    </div>
                `).join('');
                    }
                }

                // Add event listener to enquiry button
                document.getElementById('enquiryButton').addEventListener('click', function () {
                    // Open WhatsApp with pre-filled message
                    const message = `Hi, I'm interested in: ${product.title}`;
                    window.open(`https://wa.me/917339224811?text=${encodeURIComponent(message)}`, '_blank');
                });

            } catch (error) {
                console.error('Error loading product details:', error);
                alert('Error loading product details. Please try again.');
            } finally {
                hideLoader();
            }
        }

        // Show/hide loader functions
        function showLoader() {
            const loader = document.getElementById('loader')
            if (loader) {
                loader.style.display = 'flex'
            }
        }

        function hideLoader() {
            const loader = document.getElementById('loader')
            if (loader) {
                loader.style.display = 'none'
            }
        }

        // Initialize tab functionality
        function initializeTabs() {
            const tabButtons = document.querySelectorAll('.tab-button')
            const tabPanes = document.querySelectorAll('.tab-pane')

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active class from all buttons and panes
                    tabButtons.forEach(btn => btn.classList.remove('active'))
                    tabPanes.forEach(pane => pane.classList.remove('active'))

                    // Add active class to clicked button and corresponding pane
                    button.classList.add('active')
                    const tabId = button.getAttribute('data-tab')
                    document.getElementById(tabId).classList.add('active')
                })
            })
        }

        // Initialize mobile accordion functionality
        function initializeMobileAccordion() {
            const accordionButtons = document.querySelectorAll('.accordion-button')

            accordionButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const content = button.nextElementSibling
                    const icon = button.querySelector('i')

                    // Toggle active state
                    button.classList.toggle('active')
                    content.classList.toggle('active')

                    // Toggle icon
                    if (button.classList.contains('active')) {
                        icon.classList.remove('fa-chevron-down')
                        icon.classList.add('fa-chevron-up')
                    } else {
                        icon.classList.remove('fa-chevron-up')
                        icon.classList.add('fa-chevron-down')
                    }
                })
            })
        }

        // Update gallery functionality to handle videos
        function initializeGallery() {
            const thumbnails = document.querySelectorAll('.thumbnail')
            const mainDisplay = document.getElementById('mainDisplay')
            const view3dButton = document.getElementById('view3dButton')
            let currentIndex = 0
            let is3dView = false
            let currentMedia = ''

            console.log('Initializing gallery with thumbnails:', thumbnails.length)

            thumbnails.forEach((thumb, index) => {
                thumb.addEventListener('click', async () => {
                    console.log('Thumbnail clicked:', {
                        type: thumb.dataset.type,
                        src: thumb.dataset.src,
                        index: index
                    })

                    // Update active state
                    thumbnails.forEach(t => {
                        if (t && t.classList) {
                            t.classList.remove('active')
                        }
                    })
                    if (thumb && thumb.classList) {
                        thumb.classList.add('active')
                    }

                    // Update main display
                    if (thumb.dataset.type === '3d') {
                        const modelUrl = thumb.dataset.model

                        if (modelUrl.toLowerCase().endsWith('.stl')) {
                            // Convert STL to GLTF
                            const loader = new THREE.STLLoader()
                            loader.load(modelUrl, function (geometry) {
                                // Create a mesh
                                const material = new THREE.MeshStandardMaterial({
                                    color: 0x808080,
                                    metalness: 0.5,
                                    roughness: 0.5
                                })
                                const mesh = new THREE.Mesh(geometry, material)

                                // Center the geometry
                                geometry.computeBoundingBox()
                                const center = geometry.boundingBox.getCenter(new THREE.Vector3())
                                geometry.translate(-center.x, -center.y, -center.z)

                                // Create a scene
                                const scene = new THREE.Scene()
                                scene.add(mesh)

                                // Export to GLTF
                                const exporter = new THREE.GLTFExporter()
                                exporter.parse(scene, function (gltf) {
                                    // Create a blob URL from the GLTF data
                                    const blob = new Blob([JSON.stringify(gltf)], { type: 'model/gltf+json' })
                                    const gltfUrl = URL.createObjectURL(blob)

                                    // Update main display with model-viewer
                                    mainDisplay.innerHTML = `
                            <model-viewer
                                            src="${gltfUrl}"
                                alt="3D model"
                                auto-rotate
                                camera-controls
                                shadow-intensity="1"
                                            camera-orbit="0deg 75deg 105%"
                                            min-camera-orbit="auto auto 50%"
                                            max-camera-orbit="auto auto 200%"
                                            min-field-of-view="30deg"
                                            max-field-of-view="90deg"
                                interaction-prompt="auto"
                                interaction-prompt-style="basic"
                                interaction-prompt-threshold="0"
                                            exposure="1"
                                            environment-image="neutral"
                                            style="width: 100%; height: 100%;"
                            ></model-viewer>
                        `
                                    is3dView = true
                                })
                            }, undefined, function (error) {
                                console.error('Error loading STL file:', error)
                                mainDisplay.innerHTML = `<div class="error-message">Error loading 3D model</div>`
                            })
                        } else {
                            // For non-STL files, load directly
                            mainDisplay.innerHTML = `
                                <model-viewer
                                    src="${modelUrl}"
                                    alt="3D model"
                                    auto-rotate
                                    camera-controls
                                    shadow-intensity="1"
                                    camera-orbit="0deg 75deg 105%"
                                    min-camera-orbit="auto auto 50%"
                                    max-camera-orbit="auto auto 200%"
                                    min-field-of-view="30deg"
                                    max-field-of-view="90deg"
                                    interaction-prompt="auto"
                                    interaction-prompt-style="basic"
                                    interaction-prompt-threshold="0"
                                    exposure="1"
                                    environment-image="neutral"
                                    style="width: 100%; height: 100%;"
                                ></model-viewer>
                            `
                            is3dView = true
                        }
                    } else if (thumb.dataset.type === 'video') {
                        currentMedia = `
                            <video controls autoplay>
                                <source src="${thumb.dataset.src}" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        `
                        mainDisplay.innerHTML = currentMedia
                        is3dView = false
                    } else {
                        currentMedia = `<img src="${thumb.dataset.src}" alt="Product Image">`
                        mainDisplay.innerHTML = currentMedia
                        is3dView = false
                    }

                    currentIndex = index
                })
            })

            // Navigation buttons
            const prevButton = document.querySelector('.main-prev')
            const nextButton = document.querySelector('.main-next')

            if (prevButton) {
                prevButton.addEventListener('click', () => {
                    currentIndex = (currentIndex - 1 + thumbnails.length) % thumbnails.length
                    if (thumbnails[currentIndex]) {
                        thumbnails[currentIndex].click()
                    }
                })
            }

            if (nextButton) {
                nextButton.addEventListener('click', () => {
                    currentIndex = (currentIndex + 1) % thumbnails.length
                    if (thumbnails[currentIndex]) {
                        thumbnails[currentIndex].click()
                    }
                })
            }

            // 3D view button
            if (view3dButton) {
                view3dButton.addEventListener('click', () => {
                    const modelThumb = document.querySelector('.thumbnail[data-type="3d"]')
                    if (modelThumb) {
                        modelThumb.click()
                    }
                })
            }
        }

        loadProductDetails()
    </script>
<!-- WhatsApp Floating Button -->
<div class="whatsapp-float">
<button class="whatsapp-button" id="whatsappButton">
<i class="fab fa-whatsapp"></i>
</button>
</div>
<!-- WhatsApp Modal -->
<div class="whatsapp-modal" id="whatsappModal">
<div class="whatsapp-modal-content">
<div class="whatsapp-modal-header">
<div class="whatsapp-profile">
<img alt="Technovation" loading="lazy" src="/public/techno black logo-Photoroom.png"/>
<div class="whatsapp-profile-info">
<h3>Technovation</h3>
<p>Online</p>
</div>
</div>
<button class="close-modal" id="closeWhatsappModal">×</button>
</div>
<div class="whatsapp-modal-body">
<p>Hi! How can we help you today?</p>
</div>
<div class="whatsapp-modal-footer">
<a class="whatsapp-chat-button" href="https://wa.me/917339224811" target="_blank">
<i class="fab fa-whatsapp"></i> Start Chat
                </a>
</div>
</div>
</div>
<style>
        /* Update thumbnail styles */
        .thumbnail {
            position: relative;
            width: 10%;
            aspect-ratio: 1;
            border: 2px solid transparent;
            border-radius: 4px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .thumbnail.active {
            border-color: #3498db;
        }

        .thumbnail img,
        .thumbnail video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .thumbnail video {
            pointer-events: none;
        }

        .video-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            pointer-events: none;
        }

        .model-icon {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            pointer-events: none;
        }

        /* Search Results Styles */
        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-top: none;
            z-index: 1001;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .search-results.active {
            display: block;
        }

        .search-result-item {
            display: flex;
            padding: 10px;
            border-bottom: 1px solid #eee;
            text-decoration: none;
            color: #333;
        }

        .search-result-item:hover {
            background-color: #f9f9f9;
        }

        .search-result-item img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            margin-right: 10px;
        }

        .search-result-info h4 {
            margin: 0;
            font-size: 14px;
        }

        .search-result-info p {
            margin: 5px 0 0;
            font-size: 12px;
            color: #666;
        }

        .no-results {
            padding: 10px;
            text-align: center;
            color: #666;
        }

        /* Mobile Search Results Styles */
        .mobile-search-container .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-top: none;
            z-index: 1001;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .mobile-search-container .search-results.active {
            display: block;
        }

        .mobile-search-container .search-result-item {
            display: flex;
            padding: 10px;
            border-bottom: 1px solid #eee;
            text-decoration: none;
            color: #333;
        }

        .mobile-search-container .search-result-item:hover {
            background-color: #f9f9f9;
        }

        .mobile-search-container .search-result-item img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            margin-right: 10px;
        }

        .mobile-search-container .search-result-info h4 {
            margin: 0;
            font-size: 14px;
        }

        .mobile-search-container .search-result-info p {
            margin: 5px 0 0;
            font-size: 12px;
            color: #666;
        }

        /* WhatsApp Floating Button Styles */
        .whatsapp-float {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }

        .whatsapp-button {
            width: 60px;
            height: 60px;
            background-color: #25D366;
            border-radius: 50%;
            border: none;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
        }

        .whatsapp-button:hover {
            transform: scale(1.1);
        }

        .whatsapp-button i {
            font-size: 32px;
            color: white;
        }

        /* WhatsApp Modal Styles */
        .whatsapp-modal {
            display: none;
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 300px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .whatsapp-modal.active {
            display: block;
        }

        .whatsapp-modal-content {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .whatsapp-modal-header {
            background-color: #075E54;
            color: white;
            padding: 15px;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .whatsapp-profile {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .whatsapp-profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }

        .whatsapp-profile-info h3 {
            margin: 0;
            font-size: 16px;
        }

        .whatsapp-profile-info p {
            margin: 0;
            font-size: 12px;
            opacity: 0.8;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .whatsapp-modal-body {
            padding: 15px;
            background-color: #ECE5DD;
            flex-grow: 1;
        }

        .whatsapp-modal-body p {
            margin: 0;
            color: #075E54;
            font-size: 14px;
        }

        .whatsapp-modal-footer {
            padding: 15px;
            background-color: #F0F0F0;
            border-radius: 0 0 10px 10px;
        }

        .whatsapp-chat-button {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background-color: #25D366;
            color: white;
            padding: 12px 20px;
            border-radius: 20px;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }

        .whatsapp-chat-button:hover {
            background-color: #128C7E;
        }

        .whatsapp-chat-button i {
            font-size: 20px;
        }

        @media (max-width: 768px) {
            .whatsapp-float {
                bottom: 20px;
                right: 20px;
            }

            .whatsapp-button {
                width: 50px;
                height: 50px;
            }

            .whatsapp-button i {
                font-size: 28px;
            }

            .whatsapp-modal {
                bottom: 80px;
                right: 20px;
                width: 280px;
            }
        }
    </style>
<script>
        // WhatsApp Modal Functionality
        const whatsappButton = document.getElementById('whatsappButton');
        const whatsappModal = document.getElementById('whatsappModal');
        const closeWhatsappModal = document.getElementById('closeWhatsappModal');

        whatsappButton.addEventListener('click', () => {
            whatsappModal.classList.add('active');
        });

        closeWhatsappModal.addEventListener('click', () => {
            whatsappModal.classList.remove('active');
        });

        // Close modal when clicking outside
        document.addEventListener('click', (e) => {
            if (!whatsappModal.contains(e.target) && !whatsappButton.contains(e.target)) {
                whatsappModal.classList.remove('active');
            }
        });
    </script>
<script src="mouse.js"></script>
</body>
</html>